<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="filmstrip_categories_inherit" inherit_id="website_sale.filmstrip_categories"
              name="Categories Filmstrip">
        <xpath expr="//div[@class='o_wsale_filmstip_container d-flex align-items-stretch mb-2 overflow-hidden'][1]"
               position="replace">
            <div t-if="entries">
                <div class="o_wsale_filmstip_container">
                    <button class="btn btn-primary o_filmstrip_nav o_filmstrip_nav_left" type="button">‹</button>
                    <div class="o_wsale_filmstip_wrapper">
                        <ul class="o_wsale_filmstip">
                            <t t-foreach="entries" t-as="c" t-if="c.image_128" t-set="atLeastOneImage" t-value="True"/>
                            <t t-if="category.parent_id" t-set="backUrl"
                               t-value="keep('/shop/category/' + slug(category.parent_id), category=0)"/>
                            <t t-else="" t-set="backUrl" t-value="'/shop'"/>

                            <li t-foreach="entries" t-as="c"
                                t-attf-class="d-flex {{'pe-3' if not c_last else ''}}"
                                t-att-data-link-href="keep('/shop/category/' + slug(c), category=0)">
                                <input type="radio" t-attf-name="wsale_categories_top_radios_{{parentCategoryId}}"
                                       class="btn-check pe-none" t-att-id="c.id" t-att-value="c.id"
                                       t-att-checked="'true' if c.id == category.id else None"/>

                                <div t-attf-class=" btn btn-{{navClass}} d-flex align-items-center {{'ps-2 pe-3' if c.image_128 else 'px-4'}} fs-6 fw-normal {{ 'border-primary' if c.id == category.id else '' }}"
                                     t-att-for="c.id">
                                    <div t-if="c.image_128"
                                         t-attf-style="background-image:url('data:image/png;base64,#{c.image_128}')"
                                         class="o_image_40_cover oe_img_bg o_bg_img_center rounded-3 me-3"
                                         t-att-alt="c.name "/>
                                    <span t-field="c.name"/>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <button class="btn btn-primary o_filmstrip_nav o_filmstrip_nav_right" type="button">›</button>
                </div>
                <style>
                    .o_wsale_filmstip_container {
                    position: relative;
                    overflow: hidden;
                    white-space: nowrap;
                    width: 100%;
                    }
                    .o_wsale_filmstip_wrapper {
                    display: flex;
                    overflow-x: hidden;
                    }
                    .o_wsale_filmstip {
                    display: flex;
                    flex-wrap: nowrap;
                    padding-left:0;
                    }
                    .o_filmstrip_nav {
                    position: absolute;
                    top: 38%;
                    transform: translateY(-50%);
                    background-color: rgba(128, 0, 128, 0.3);
                    border: none;
                    color: white;
                    font-size: 1.5rem;
                    cursor: pointer;
                    z-index: 1000;
                    height: 40px;
                    width: 40px;
                    visibility: hidden;
                    font-size:20px;
                    }

                    .o_filmstrip_nav_left {
                    left: 10px;
                    }

                    .o_filmstrip_nav_right {
                    right: 10px;
                    }

                    .o_wsale_filmstip_container:hover .o_filmstrip_nav {
                    visibility: visible;
                    }

                    .item {
                    flex: 0 0 auto;
                    width: 100px;
                    height: 100px;
                    background: #f0f0f0;
                    border: 1px solid #ccc;
                    text-align: center;
                    line-height: 100px;
                    margin-right: 5px;
                    }
                </style>

                <script>
                    <!--                document.addEventListener('DOMContentLoaded', function() {-->
                    <!--                var wrapper = document.querySelector('.o_wsale_filmstip_wrapper');-->
                    <!--                var leftButton = document.querySelector('.o_filmstrip_nav_left');-->
                    <!--                var rightButton = document.querySelector('.o_filmstrip_nav_right');-->
                    <!--                var scrollAmount = 200;-->

                    <!--                leftButton.addEventListener('click', function() {-->
                    <!--                wrapper.scrollBy({ left: -scrollAmount ,behavior: 'smooth' });-->
                    <!--                });-->

                    <!--                rightButton.addEventListener('click', function() {-->
                    <!--                wrapper.scrollBy({ left: scrollAmount,behavior: 'smooth' });-->
                    <!--                });-->
                    document.addEventListener('DOMContentLoaded', function() {
                    var wrapper = document.querySelector('.o_wsale_filmstip_wrapper');
                    var leftButton = document.querySelector('.o_filmstrip_nav_left');
                    var rightButton = document.querySelector('.o_filmstrip_nav_right');
                    var scrollAmount = 200;

                    // Debugging: Check if the elements are found
                    if (!wrapper || !leftButton || !rightButton) {
                    console.error('One of the required elements was not found.');
                    return;
                    }

                    // Debugging: Log scroll position before scrolling
                    leftButton.addEventListener('click', function() {
                    console.log('Current scroll position (before):', wrapper.scrollLeft);
                    wrapper.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
                    console.log('Left button clicked, scrolled left by', scrollAmount);
                    });

                    rightButton.addEventListener('click', function() {
                    console.log('Current scroll position (before):', wrapper.scrollLeft);
                    wrapper.scrollBy({ left: scrollAmount, behavior: 'smooth' });
                    console.log('Right button clicked, scrolled right by', scrollAmount);
                    });

                    // Debugging: Log after scroll
                    wrapper.addEventListener('scroll', function() {
                    console.log('Current scroll position (after):', wrapper.scrollLeft);
                    });
                    });

                </script>
            </div>

        </xpath>
    </template>
</odoo>

